{"ast":null,"code":"import React from'react';import{useSelector}from'react-redux';import{BarChart,Bar,XAxis,YAxis,Tooltip,Legend,ResponsiveContainer}from'recharts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getMonthYear=dateStr=>{const date=new Date(dateStr);return`${date.getMonth()+1}-${date.getFullYear()}`;};const MonthlyBarChart=()=>{const transactions=useSelector(state=>state.transactions.transactions);const dataMap={};transactions.forEach(_ref=>{let{date,amount,type}=_ref;if(!date)return;const monthYear=getMonthYear(date);if(!dataMap[monthYear]){dataMap[monthYear]={month:monthYear,income:0,expense:0};}if(type==='income'){dataMap[monthYear].income+=Number(amount);}else if(type==='expense'){dataMap[monthYear].expense+=Number(amount);}});const data=Object.values(dataMap).sort((a,b)=>{const[mA,yA]=a.month.split('-').map(Number);const[mB,yB]=b.month.split('-').map(Number);return yA!==yB?yA-yB:mA-mB;});if(data.length===0){return/*#__PURE__*/_jsx(\"p\",{children:\"Brak danych do wykresu miesi\\u0119cznego.\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:300,marginBottom:\"50px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Przychody i wydatki miesi\\u0119czne\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{children:/*#__PURE__*/_jsxs(BarChart,{data:data,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:\"month\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"income\",fill:\"#82ca9d\",name:\"Przychody\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"expense\",fill:\"#ff4d4f\",name:\"Wydatki\"})]})})]});};export default MonthlyBarChart;","map":{"version":3,"names":["React","useSelector","BarChart","Bar","XAxis","YAxis","Tooltip","Legend","ResponsiveContainer","jsx","_jsx","jsxs","_jsxs","getMonthYear","dateStr","date","Date","getMonth","getFullYear","MonthlyBarChart","transactions","state","dataMap","forEach","_ref","amount","type","monthYear","month","income","expense","Number","data","Object","values","sort","a","b","mA","yA","split","map","mB","yB","length","children","style","width","height","marginBottom","dataKey","fill","name"],"sources":["/Users/karolinaj/Desktop/kury/src/components/charts/MonthlyBarChart.jsx"],"sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer } from 'recharts';\n\nconst getMonthYear = (dateStr) => {\n  const date = new Date(dateStr);\n  return `${date.getMonth() + 1}-${date.getFullYear()}`;\n};\n\nconst MonthlyBarChart = () => {\n  const transactions = useSelector(state => state.transactions.transactions);\n\n  const dataMap = {};\n\n  transactions.forEach(({ date, amount, type }) => {\n    if (!date) return;\n    const monthYear = getMonthYear(date);\n\n    if (!dataMap[monthYear]) {\n      dataMap[monthYear] = { month: monthYear, income: 0, expense: 0 };\n    }\n\n    if (type === 'income') {\n      dataMap[monthYear].income += Number(amount);\n    } else if (type === 'expense') {\n      dataMap[monthYear].expense += Number(amount);\n    }\n  });\n\n  const data = Object.values(dataMap).sort((a, b) => {\n    const [mA, yA] = a.month.split('-').map(Number);\n    const [mB, yB] = b.month.split('-').map(Number);\n    return yA !== yB ? yA - yB : mA - mB;\n  });\n\n  if (data.length === 0) {\n    return <p>Brak danych do wykresu miesięcznego.</p>;\n  }\n\n  return (\n    <div style={{ width: '100%', height: 300, marginBottom:\"50px\" }}>\n      <h2>Przychody i wydatki miesięczne</h2>\n      <ResponsiveContainer>\n        <BarChart data={data}>\n          <XAxis dataKey=\"month\" />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          <Bar dataKey=\"income\" fill=\"#82ca9d\" name=\"Przychody\" />\n          <Bar dataKey=\"expense\" fill=\"#ff4d4f\" name=\"Wydatki\" />\n        </BarChart>\n      </ResponsiveContainer>\n    </div>\n  );\n};\n\nexport default MonthlyBarChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}