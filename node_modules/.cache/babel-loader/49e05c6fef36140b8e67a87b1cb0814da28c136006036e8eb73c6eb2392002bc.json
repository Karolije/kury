{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import{BarChart,Bar,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer}from'recharts';import{fetchTransactions}from'../../features/transactions/TransactionsSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EggChart=()=>{const dispatch=useDispatch();const transactions=useSelector(state=>state.transactions.transactions);// poprawiona ścieżka\nconst[data,setData]=useState([]);useEffect(()=>{dispatch(fetchTransactions());},[dispatch]);useEffect(()=>{console.log('transactions:',transactions);// debug\nif(!transactions||transactions.length===0)return;const grouped={};transactions.forEach(item=>{if(item.type==='collected'||item.type==='sold'){if(!grouped[item.date]){grouped[item.date]={date:item.date,collected:0,sold:0};}if(item.type==='collected'){grouped[item.date].collected+=Number(item.amount);}else if(item.type==='sold'){grouped[item.date].sold+=Number(item.amount);}}});const result=Object.values(grouped).sort((a,b)=>a.date.localeCompare(b.date));setData(result);},[transactions]);// Możesz też dodać console.log(data), by zobaczyć, co ustawiasz w stanie data\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"glass-box\",style:{height:300},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Podsumowanie jajek\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(BarChart,{data:data,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"collected\",fill:\"#82ca9d\",name:\"Zebrane\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"sold\",fill:\"#8884d8\",name:\"Sprzedane\"})]})})]});};export default EggChart;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","fetchTransactions","jsx","_jsx","jsxs","_jsxs","EggChart","dispatch","transactions","state","data","setData","console","log","length","grouped","forEach","item","type","date","collected","sold","Number","amount","result","Object","values","sort","a","b","localeCompare","className","style","height","children","width","strokeDasharray","dataKey","fill","name"],"sources":["/Users/karolinaj/Desktop/kury/src/components/charts/EggChart.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer,\n} from 'recharts';\nimport { fetchTransactions } from '../../features/transactions/TransactionsSlice';\n\nconst EggChart = () => {\n    const dispatch = useDispatch();\n    const transactions = useSelector((state) => state.transactions.transactions); // poprawiona ścieżka\n    const [data, setData] = useState([]);\n  \n    useEffect(() => {\n      dispatch(fetchTransactions());\n    }, [dispatch]);\n  \n    useEffect(() => {\n      console.log('transactions:', transactions); // debug\n  \n      if (!transactions || transactions.length === 0) return;\n  \n      const grouped = {};\n  \n      transactions.forEach((item) => {\n        if (item.type === 'collected' || item.type === 'sold') {\n          if (!grouped[item.date]) {\n            grouped[item.date] = { date: item.date, collected: 0, sold: 0 };\n          }\n          if (item.type === 'collected') {\n            grouped[item.date].collected += Number(item.amount);\n          } else if (item.type === 'sold') {\n            grouped[item.date].sold += Number(item.amount);\n          }\n        }\n      });\n  \n      const result = Object.values(grouped).sort((a, b) => a.date.localeCompare(b.date));\n      setData(result);\n    }, [transactions]);\n  \n    // Możesz też dodać console.log(data), by zobaczyć, co ustawiasz w stanie data\n  \n    return (\n      <div className=\"glass-box\" style={{ height: 300 }}>\n        <h2>Podsumowanie jajek</h2>\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <BarChart data={data}>\n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis dataKey=\"date\" />\n            <YAxis />\n            <Tooltip />\n            <Legend />\n            <Bar dataKey=\"collected\" fill=\"#82ca9d\" name=\"Zebrane\" />\n            <Bar dataKey=\"sold\" fill=\"#8884d8\" name=\"Sprzedane\" />\n          </BarChart>\n        </ResponsiveContainer>\n      </div>\n    );\n  };\n  \n\nexport default EggChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}